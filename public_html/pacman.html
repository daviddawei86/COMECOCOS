<!DOCTYPE html>
<!--
To change this license header, choose License Headers in Project Properties.
To change this template file, choose Tools | Templates
and open the template in the editor.
-->
<html>
    <head>
        <title>DAVID RODRIGUEZ</title>
        <meta charset="UTF-8">
        <meta name="viewport" content="width=device-width, initial-scale=1.0">
    </head>
    <body>

        <script>

            //DIRECCIÓN
            var arriba = 0;  //87
            var abajo = 1;  //83
            var derecha = 2;  //69
            var izquierda = 3;  //65
            //Inicializamos dirección en 4 para que no coincida con el valor de arrriba.
            var direccion = 4;

            //OBJETO PACMAN
            var pacman = {};
            pacman.x = 0;
            pacman.y = 0;
            pacman.direccion = 4;


            var fantasma1 = {};
            fantasma1.x = 0;
            fantasma1.y = 0;
            fantasma1.direccion = 4;

            var fantasma2 = {};
            fantasma2.x = 0;
            fantasma2.y = 0;
            fantasma2.direccion = 4;

            var fantasma3 = {};
            fantasma3.x = 0;
            fantasma3.y = 0;
            fantasma3.direccion = 4;

            //Tablero bidimensional , ORDEN FILAS/COLUMNAS comienza por la esquina superior izquierda
            var tablero = [
                [1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1],
                [1, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 1],
                [1, 0, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 0, 1, 1, 1, 1, 0, 1],
                [1, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 1, 0, 1],
                [1, 0, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 0, 1, 1, 0, 1, 0, 1],
                [1, 0, 1, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 1, 0, 1, 1, 0, 1, 0, 1],
                [1, 0, 1, 0, 1, 0, 1, 1, 0, 1, 1, 1, 1, 0, 1, 1, 1, 1, 0, 1, 1, 0, 0, 0, 1, 1, 0, 1, 0, 1],
                [1, 0, 0, 0, 1, 0, 1, 1, 0, 1, 1, 1, 1, 0, 1, 1, 1, 1, 0, 1, 1, 0, 1, 1, 1, 1, 0, 0, 0, 1],
                [1, 0, 1, 0, 1, 0, 1, 1, 0, 1, 1, 1, 1, 0, 1, 1, 1, 1, 0, 1, 1, 0, 0, 0, 0, 1, 0, 1, 0, 1],
                [1, 0, 1, 0, 1, 0, 1, 1, 0, 0, 0, 0, 0, 0, 1, 1, 1, 1, 0, 0, 0, 0, 1, 1, 0, 1, 0, 1, 0, 1],
                [1, 0, 1, 0, 1, 0, 1, 1, 0, 1, 1, 1, 1, 1, 1, 1, 1, 1, 0, 1, 1, 0, 1, 1, 0, 0, 0, 1, 0, 1],
                [1, 0, 1, 0, 1, 0, 1, 1, 0, 1, 1, 1, 1, 1, 1, 1, 1, 1, 0, 1, 1, 0, 1, 1, 0, 1, 0, 1, 0, 1],
                [1, 0, 1, 0, 1, 0, 1, 1, 0, 1, 1, 1, 1, 1, 1, 1, 1, 1, 0, 1, 1, 0, 0, 0, 0, 1, 0, 1, 0, 1],
                [1, 0, 1, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 1, 1, 0, 1, 1, 1, 1, 0, 1, 0, 1],
                [1, 0, 1, 0, 1, 1, 1, 1, 0, 1, 1, 1, 1, 0, 1, 1, 1, 1, 0, 0, 0, 0, 1, 1, 1, 1, 0, 1, 0, 1],
                [1, 0, 1, 0, 1, 1, 1, 1, 0, 1, 1, 1, 1, 0, 1, 1, 1, 1, 0, 1, 1, 1, 1, 1, 1, 1, 0, 1, 0, 1],
                [1, 0, 0, 0, 1, 1, 1, 1, 0, 1, 1, 1, 1, 0, 1, 1, 1, 1, 0, 1, 1, 1, 1, 1, 1, 1, 0, 0, 0, 1],
                [1, 0, 1, 0, 1, 1, 1, 1, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 1, 1, 1, 1, 1, 1, 1, 0, 1, 0, 1],
                [1, 0, 1, 0, 1, 1, 1, 1, 0, 1, 1, 1, 1, 0, 1, 1, 1, 1, 0, 0, 0, 0, 0, 0, 0, 0, 0, 1, 0, 1],
                [1, 0, 1, 0, 1, 1, 1, 1, 0, 1, 1, 1, 1, 0, 1, 1, 1, 1, 0, 1, 1, 1, 0, 1, 1, 1, 0, 1, 0, 1],
                [1, 0, 1, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 1, 1, 1, 0, 1, 1, 1, 0, 1, 0, 1],
                [1, 0, 1, 0, 1, 1, 1, 1, 0, 1, 1, 0, 1, 1, 1, 1, 1, 1, 0, 1, 1, 1, 0, 1, 1, 1, 0, 1, 0, 1],
                [1, 0, 1, 0, 1, 1, 1, 1, 0, 1, 1, 0, 1, 1, 1, 1, 1, 1, 0, 1, 1, 1, 0, 1, 1, 1, 0, 1, 0, 1],
                [1, 0, 0, 0, 1, 1, 1, 1, 0, 0, 0, 0, 1, 1, 1, 1, 1, 1, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 1],
                [1, 0, 1, 0, 1, 1, 1, 1, 0, 1, 1, 1, 1, 1, 1, 1, 1, 1, 0, 1, 1, 1, 1, 1, 1, 1, 0, 1, 0, 1],
                [1, 0, 1, 0, 1, 1, 1, 1, 0, 1, 1, 1, 1, 1, 1, 1, 1, 1, 0, 1, 1, 1, 1, 1, 1, 1, 0, 1, 0, 1],
                [1, 0, 1, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 1, 0, 1],
                [1, 0, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 0, 1],
                [1, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 1],
                [1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1]
            ];

            //Listener , cuando apretas una tecla de movimiento (W,S,A,D cada una tiene su código) esta se guardan en ultimaDirección   
            document.addEventListener("keydown", keyDownTextField, false);
            function keyDownTextField(e) {
                var keyCode = e.keyCode;

                if (keyCode == 87) {
                    pacman.ultimaDireccion = 0;
                } else if (keyCode == 83) {
                    pacman.ultimaDireccion = 1;
                } else if (keyCode == 69) {
                    pacman.ultimaDireccion = 2;
                } else if (keyCode == 65) {
                    pacman.ultimaDireccion = 3;
                }
            }
            //Guardamos la posición y la dirección de los objetos en una array para cada una
            var variablePacman = [pacman.x, pacman.y, pacman.direccion];
            var variableFantasma1 = [fantasma1.x, fantasma1.y, fantasma1.direccion];
            var variableFantasma2 = [fantasma2.x, fantasma2.y, fantasma2.direccion];
            var variableFantasma3 = [fantasma3.x, fantasma3.y, fantasma3.direccion];

            //Imprimimos el tablero guardandolo en una variable y a continuación imprimimos.
            for (var i = 0; i < tablero.length; i++) {

                if (i != 0) {
                  //  document.write("<br>");
                }
                for (var j = 0; j < tablero[i].length; j++) {

                    if (tablero[i][j] == 1 && j != tablero.lenght - 1) {
                    //    document.write("X");
                    } else
                    {
                     //   document.write("U");
                    }
                }

            }


            //POSICIÓN ALEATORIA PACMAN
            do {
                pacman.x = Math.floor((Math.random() * 30) + 0);
                pacman.y = Math.floor((Math.random() * 30) + 0);

            } while (tablero[pacman.x][pacman.y] == 1);
            
              pacman.direccion=direccionInicial(pacman.direccion, pacman.x, pacman.y);
              

            //POSICIÓN ALEATORIA FANTASMA1
            do {
                fantasma1.x = Math.floor((Math.random() * 30) + 0);
                fantasma1.y = Math.floor((Math.random() * 30) + 0);

            } while (tablero[fantasma1.x][fantasma1.y] == 1);
            
            fantasma1.direccion=direccionInicial(fantasma1.direccion, fantasma1.x, fantasma1.y);

            //POSICIÓN ALEATORIA FANTASMA2
            do {
                fantasma2.x = Math.floor((Math.random() * 30) + 0);
                fantasma2.y = Math.floor((Math.random() * 30) + 0);

            } while (tablero[fantasma2.x][fantasma2.y] == 1);
           
           fantasma2.direccion=direccionInicial(fantasma2.direccion, fantasma2.x, fantasma2.y);

            //POSICIÓN ALEATORIA FANTASMA3
            do {
                fantasma3.x = Math.floor((Math.random() * 30) + 0);
                fantasma3.y = Math.floor((Math.random() * 30) + 0);

            } while (tablero[fantasma3.x][fantasma3.y] == 1);

            fantasma3.direccion=direccionInicial(fantasma3.direccion, fantasma3.x, fantasma3.y);
            
            //ASIGNAMOS DIRECCIÓN INICIAL 
            function direccionInicial(d, x, y) {
                ok = false;
                do {
                    d = Math.floor((Math.random() * 4) + 0);

                    if (d == 1 && tablero[x + 1][y] == 0) {
                        d = 1;
                        ok = true;
                    }

                    if (d == 0 && tablero[x - 1][y] == 0) {
                        d = 0;
                        ok = true;
                    }

                    if (d == 2 && tablero[x][y + 1] == 0) {
                        d = 2;
                        ok = true;
                    }

                    if (d == 3 && tablero[x][y - 1] == 0) {
                        d = 3;
                        ok = true;
                    }
                } while (ok == false);
                return d;
            }

        </script>
    </body>
</html>
